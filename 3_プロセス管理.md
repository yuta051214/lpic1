# プロセス管理

## プロセスの生成、監視、終了
ps, top, free
- `ps -ef`：
- `ps aux`：



## 実行優先度の変更
nice, renice


## シェルのジョブ管理
jobs, nohup, bg, fg, uptime, watch, tmux, screen
&, バックグラウンドジョブ、フォアグラウンドジョブ


## シグナル送信による制御
kill, killall, pgrep, pkill
シグナル





- 用語の意味
    - UID：汎用的な用語。「ユーザID」と呼べば、カーネルが保持する「real」「effective」「saved」といった各種 UID のいずれか、あるいは UID 全般を指すことが多い。
    - RUID：「real UID」の略。プロセスを起動した本人の UID。つまり、プロセスの所有者。getuid() で取得。
    - EUID：「effective UID」の略。ファイルアクセス権限チェックに用いられる UID。つまりそのプログラムが動作するときの権限。geteuid() で取得。
    - SUID：「saved UID」の略。setuid 実行前の EUID を保持しておくための UID。
- RUID と EUID は、ほとんどのプロセスで一致している。例外的に異なるケースは、
    - setuid ビット付きバイナリ
	    - /usr/bin/passwd のように所有者（通常は root）の権限で動かす必要があるプログラム。
	    - RUID はプロセスを起動したユーザを表し、EUID はプログラムが動作するときの権限（root）になります。
	- sudo / su
	    - sudo コマンド：子プロセスで RUID=0, EUID=0 に切り替わります。
	    - su コマンド：ユーザを切り替えるために EUID が一時的に変わります。
- 「所有者」とは
    - 一般に「所有者」と言ったときは、そのプロセスが "どのユーザ権限で動いているか" を示す「有効ユーザID（EUID）」を指します。
	    - ps や pgrep の OWNER／USER 列に出てくる名前や UID はすべて "EUID" です。
	    - これはファイルアクセスやシステムコールの権限チェックに使われる、「そのプロセスの“権限的な”持ち主」を表すためです。
    - 一方で「実ユーザID（RUID）」は「誰が起動したか」を示す情報ですが、通常「所有者」というときには出てきません。

- pgrep
    - 現在実行中のプロセスを調べて、その「実効ユーザID（Effective UID）」の ユーザ名(文字列表記) や User ID(数値表記) などを基にプロセスIDを検索します
    - `$ pgrep -u root` / `$ pgrep -U 0`：UID（EUID/RUID）がroot（UID: 0）であるプロセスを検索する
        - `-u`：
            - EUID（有効ユーザID） が指定したユーザ／UID と一致するプロセスを検索
            - setuid などで権限昇格したプロセスの“所有者（EUID）”を絞り込む際に使います。
        - `-U`：
            - RUID（実ユーザID） が指定したユーザ／UID と一致するプロセスを検索
            - 「誰が起動したか」を基準にプロセスを絞り込みたいときに使います